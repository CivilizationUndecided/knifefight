@namespace Facepunch.UI
@inherits Panel

<root class="@(IsActive ? "is-active" : "")">
    <div class="background" />
    <div class="grow" />

    @if ( Weapon.IsValid() )
    {
        @if ( !string.IsNullOrEmpty( Weapon.Resource.Icon ) )
        {
            <div class="column">
            <div class="gunicon" style="background-image:url(@Weapon.Resource.Icon);" />

            @if ( IsActive )
            {
                <label class="gunname">@Weapon.Resource.Name</label>
            }
            </div>
        }
        else
        {
            <div class="row">
                <label class="gunname">@Weapon.Resource.Name</label>
            </div>
        }

        <InputHint Action="Slot@((int) Slot)" class="small" Size="@InputGlyphSize.Small" />
    }
</root>

@code
{
    /// <summary>
    ///  The weapon's slot
    /// </summary>
    public WeaponSlot Slot => Weapon?.Resource.Slot ?? default;

    /// <summary>
    /// The player's weapon.
    /// </summary>
    public Weapon Weapon { get; set; }

    private AmmoContainer AmmoContainer => Weapon?.Components.Get<AmmoContainer>( FindMode.EverythingInSelfAndDescendants );
    public PlayerController Player => Weapon?.PlayerController;
    public bool IsActive => Player?.CurrentWeapon == Weapon;

    protected override int BuildHash()
    {
        return HashCode.Combine( IsActive, Weapon, AmmoContainer?.Ammo );
    }   
}
